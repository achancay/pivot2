<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to rspivot • rspivot</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rspivot</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rspivot.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ryantimpe/rspivot">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Introduction to rspivot</h1>
                        <h4 class="author">Ryan Timpe</h4>
            
            <h4 class="date">2018-01-25</h4>
          </div>

    
    
<div class="contents">
<p>rspivot is a Shiny gadget for RStudio for viewing data frames.</p>
<p>The <code>View()</code> function in RStudio displays data frames and tibbles as they are stored in the R environment: flat files of many rows and columns. Though <code>View()</code> provides the ability to filter series using a single parameter or value range, it lacks many tools necessary for properly examing data output over many metrics. <code>rspivot</code> provides an alternative to <code>View()</code> by viewing data frames and tibbles as interactive pivot tables.</p>
<p>As with <code>View()</code>, the key assumption of <code><a href="../reference/rspivot.html">rspivot()</a></code> is that all major analysis and calculations are performed in R or Tidyverse script before passing the object to <code>rspivot</code>. However, <code>rspivot</code> has the ability to perform simple calculations on the data (growth rates, shares, min, max, etc) before displaying the results in a pivot table.</p>
<div id="the-rspivot-window" class="section level2">
<h2 class="hasAnchor">
<a href="#the-rspivot-window" class="anchor"></a>The rspivot window</h2>
<p>Running <code><a href="../reference/rspivot.html">rspivot()</a></code> will open a <a href="https://shiny.rstudio.com/articles/gadgets.html">Shiny gadget</a> window in RStudio. The gagdet can also be opened using the Addins menu in RStudio.</p>
<p>By default, the gadget will use the last created object in the enviroment using the <code>.Last.value</code> object in R. This object must be a data frame or a tibble.</p>
<p>Alternatively, you can pass any data frame to the function. The easiest option is to use a data frame with a single column of values, labeled <code>value</code>. Passing <code>GVAIndustry</code>, a data frame of macroeconomic series from Eurostat (included in the package), results in the window below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rspivot)
<span class="kw"><a href="../reference/rspivot.html">rspivot</a></span>(GVAIndustry)</code></pre></div>
<p><img src="rspivot_img/1_launch.JPG" width="650px"></p>
<p>If the data frame or tibble has more than one column of values, these columns must be explicitly listed in order for rspivot to distinguish values from descriptive columns using the <code>valueName</code> input. This input can take a single string (if the single value column is not labeled <code>value</code>) or an array of names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/rspivot.html">rspivot</a></span>(iris, <span class="dt">valueName =</span> <span class="kw">c</span>(<span class="st">"Petal.Length"</span>, <span class="st">"Petal.Width"</span>))</code></pre></div>
<p>For larger windows, use <code>launch.browser = TRUE</code> in the function call.</p>
</div>
<div id="table" class="section level2">
<h2 class="hasAnchor">
<a href="#table" class="anchor"></a>Table</h2>
<p>The default table displays values as the sum of all data values, segmented by the series shown in the rows and columns. The rows and columns are sorted to match the same order of the elements in the data frame. To sort in ascending or descending order, click the column names in the table.</p>
</div>
<div id="rows-nested-rows-and-columns" class="section level2">
<h2 class="hasAnchor">
<a href="#rows-nested-rows-and-columns" class="anchor"></a>Rows, Nested Rows, and Columns</h2>
<p>The top three menus list each of the series in the data frame to use as the rows and columns in the pivot table. Additionally, you can choose to nest row values to show the combination of two series.</p>
<p>For each series displayed in the table, the checkbox below the select menus toggles the marginal totals. The row and nested row totals are added as the last element in the series. The column total is appended as a column on the righthand side of the table.</p>
<p>An additional option for columns is to show sparkline or bar charts, displaying the values of every column in each row. This provides a quick glance of the data trends in each row.</p>
</div>
<div id="filters" class="section level2">
<h2 class="hasAnchor">
<a href="#filters" class="anchor"></a>Filters</h2>
<p>For each series in the data frame, excluding the values, there is a filter on the lefthand side of the rspivot window. For most series, these will be a dropdown box, allowing the user to choose one or many options.</p>
<p>These select menus filter the data frame to only include the rows of data that contain those elements.</p>
<p>Each menu defaults to only one item, “Show All”. This item provides a shortcut to include all elements in a series, without overcrowding the menu windows. Including this option in a filter selection, even with other specific elements, will always include all elements and therefore will not filter the data frame over that series.</p>
<p>If a series is strictly numeric (e.g. Year), then the filter menu will be a slider input, specifying the minimum and maximum values to filter.</p>
<p>The data frame will not be filtered until pressing the blue “Refresh Data” button on the top right. This will ensure the gadget runs smoothly and quickly for large data frames.</p>
</div>
<div id="resuming-table-state" class="section level2">
<h2 class="hasAnchor">
<a href="#resuming-table-state" class="anchor"></a>Resuming table state</h2>
<p>The default state of an <code>rspivot</code> window to include all elements in each series, using the right-most series in the data frame as the columns and the second right-most series as the rows. These defaults can be changed in the function call.</p>
<p>The easiest way to change the defaults is to initially run the <code><a href="../reference/rspivot.html">rspivot()</a></code> function without changing any inputs. Use the menus to select the desired filters, rows, and columns. Below the table, <code>rspivot</code> prints out the function call that can be used in the future to resume the state of the table, even if the data changes.</p>
<p><img src="rspivot_img/1_savestate.JPG" width="650px"></p>
<p>This area includes the option to copy the function call onto the clipboard, which can be pasted in the console or R script. Alternatively, you can select the option to automatically print the final function call into your console or script (wherever the curser is active) after clicking the “Done” button.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rspivot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rspivot/topics/rspivot">rspivot</a></span>(GVAIndustry, <span class="dt">initCols =</span> <span class="st">"Year"</span>, <span class="dt">initRows =</span> <span class="st">"Country"</span>, <span class="dt">initNest =</span> <span class="st">""</span>, 
           <span class="dt">initFilters =</span> <span class="kw">list</span>(<span class="dt">Country =</span> <span class="kw">c</span>(<span class="st">"Greece"</span>, <span class="st">"Spain"</span>, <span class="st">"Portugal"</span>, <span class="st">"Italy"</span>),
                              <span class="dt">Price =</span> <span class="kw">c</span>(<span class="st">"Nominal"</span>), 
                              <span class="dt">Series =</span> <span class="kw">c</span>(<span class="st">"Gross Value Added"</span>), <span class="dt">Year =</span> <span class="kw">c</span>(<span class="dv">2004</span>, <span class="dv">2014</span>)))</code></pre></div>
<p>Once in the console or script editor, this function call can be manually changed by adding and removing elements. Series in the data frame that are not specified in the function call will default to “Show All”.</p>
<p>In addition to filters and row/column initial values, value functions, <code>initPivotValues</code>, and data metrics, <code>initMetric</code>, (see below) can also be passed in the function call.</p>
</div>
<div id="additional-features" class="section level1">
<h1 class="hasAnchor">
<a href="#additional-features" class="anchor"></a>Additional features</h1>
<div id="graphical-view" class="section level2">
<h2 class="hasAnchor">
<a href="#graphical-view" class="anchor"></a>Graphical view</h2>
<p>The plot tab provides the option to view the table as a chart. This can be displayed as a line chart, grouped bars, or stacked bars.</p>
<p>Columns in the pivot table are used as the x-axis, while the selected rows are each represented as a data group. If the pivot table has nested rows, each of those nests is separated into <a href="http://ggplot2.tidyverse.org/reference/facet_grid.html">facets</a>.</p>
<p>This feature is in development.</p>
</div>
<div id="data-options" class="section level2">
<h2 class="hasAnchor">
<a href="#data-options" class="anchor"></a>Data options</h2>
<p>The data table options tab provides options for summarizing and modifying the values shown in the pivot table. From left to right, the options listed follow the same flow as the calculations to display the data table.</p>
</div>
<div id="pivot-table-values" class="section level2">
<h2 class="hasAnchor">
<a href="#pivot-table-values" class="anchor"></a>Pivot table values</h2>
<p>Pivot table values determine what is shown in the data tables. This tells the pivot tables how to combine every value in the data frame that belongs to a particular row and column.</p>
<p>If you are familiar with the <code>dplyr</code> package, these are the functions that are passed to <code><a href="http://dplyr.tidyverse.org/reference/summarise.html">dplyr::summarize()</a></code>. Any function that summarizes groups of data into a single value can be used. Most common ones are provided as defaults in the menu.</p>
<p>The pivot table value function can be set on the initial function call using the <code>initPivotValues</code> input.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/rspivot.html">rspivot</a></span>(GVAIndustry, <span class="dt">initPivotValues =</span> <span class="st">"mean"</span>)</code></pre></div>
<div id="sum" class="section level3">
<h3 class="hasAnchor">
<a href="#sum" class="anchor"></a>Sum</h3>
<p>The default pivot table value is <code>sum(., na.rm=TRUE)</code>. Every data point that belongs to a particular row and column will be added together, ignoring <code>NA</code> values.</p>
</div>
<div id="mean-median-min-max" class="section level3">
<h3 class="hasAnchor">
<a href="#mean-median-min-max" class="anchor"></a>Mean, Median, Min, Max</h3>
<p>The pivot table values menu contains a selection of default functions that can be used to <code>summarize</code> the data frame. The options for <code>mean</code>, <code>median</code>, <code>min</code>, and <code>max</code> all default to <code>na.rm=TRUE</code>.</p>
</div>
<div id="count" class="section level3">
<h3 class="hasAnchor">
<a href="#count" class="anchor"></a>Count</h3>
<p>The <code>count</code> option provides a count of the number of data values that contribute to each row and column. This uses the function<code><a href="http://dplyr.tidyverse.org/reference/n.html">dplyr::n()</a></code>.</p>
</div>
<div id="custom-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#custom-functions" class="anchor"></a>Custom functions</h3>
<p>In addition to the defaults, any single input named function that summarizes data groups and returns a single value can be passed to the <code><a href="../reference/rspivot.html">rspivot()</a></code> function call. This function will be added to the list of options in the Pivot Table Values menu for toggling during the session. Wrapping the name of the function in <code>c()</code> allows you to provide a human-readable name for the function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sd_narm &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="kw">return</span>(<span class="kw">sd</span>(x, <span class="dt">na.rm=</span><span class="ot">TRUE</span>))
}

<span class="kw"><a href="../reference/rspivot.html">rspivot</a></span>(GVAIndustry, <span class="dt">initPivotValues =</span> <span class="kw">c</span>(<span class="st">"StDev"</span> =<span class="st"> "sd_narm"</span>))</code></pre></div>
</div>
</div>
<div id="data-modes" class="section level2">
<h2 class="hasAnchor">
<a href="#data-modes" class="anchor"></a>Data modes</h2>
<p>Data modes are applied to the pivot table after the values are calculated. The default is to display the values unaltered.</p>
<p>Data modes are valuable for reviewing data, as the data can be viewed as differences, % growth rates, or % shares of the total. If any of these alternate modes are selected, another select menu appears with a list of each of the series in the data frame. This determines over which series the metrics are calculated.</p>
<p>For example, <code><a href="../reference/rspivot.html">rspivot(GVAIndustry, initRows = "Country", initMetric = list(metric = "Shares", series = "Country"))</a></code> will transform the data into country shares, where the sum of all countries will equal 100%, while <code><a href="../reference/rspivot.html">rspivot(GVAIndustry, initRows = "Industry", initMetric = list(metric = "Shares", series = "Industry"))</a></code> will ensure the sum of all industries will equal 100%.</p>
<p>It is recommended that the Data Mode series is viewed as a row or column in the pivot table.</p>
<p>When viewing the data values as a mode, set the Nested Rows series to <code>*Metric*</code> to view both the values and the data mode at the same time. This option can be set at the <code><a href="../reference/rspivot.html">rspivot()</a></code> function call as well with <code>initNest = "Metric_calc"</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/rspivot.html">rspivot</a></span>(GVAIndustry, <span class="dt">initCols =</span> <span class="st">"Year"</span>, <span class="dt">initRows =</span> <span class="st">"Industry"</span>, <span class="dt">initNest =</span> <span class="st">"Metric_calc"</span>,                         <span class="dt">initMetric =</span> <span class="kw">list</span>(<span class="dt">metric =</span> <span class="st">"Growth"</span>, <span class="dt">series =</span> <span class="st">"Year"</span>))</code></pre></div>
</div>
<div id="other-options" class="section level2">
<h2 class="hasAnchor">
<a href="#other-options" class="anchor"></a>Other options</h2>
<div id="decimal-digits" class="section level3">
<h3 class="hasAnchor">
<a href="#decimal-digits" class="anchor"></a>Decimal digits</h3>
<p>For each the data values and the data metric values, specify the number of digit to include in each value.</p>
</div>
<div id="units" class="section level3">
<h3 class="hasAnchor">
<a href="#units" class="anchor"></a>Units</h3>
<p>View data as thousands, millions, or billions.</p>
</div>
<div id="truncate-strings" class="section level3">
<h3 class="hasAnchor">
<a href="#truncate-strings" class="anchor"></a>Truncate strings</h3>
<p>For long strings, limit the number of displayed characters. The default value is 30. This does not affect the strings in the filter and row/column menus.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-rspivot-window">The rspivot window</a></li>
      <li><a href="#table">Table</a></li>
      <li><a href="#rows-nested-rows-and-columns">Rows, Nested Rows, and Columns</a></li>
      <li><a href="#filters">Filters</a></li>
      <li><a href="#resuming-table-state">Resuming table state</a></li>
      <li>
<a href="#additional-features">Additional features</a><ul class="nav nav-pills nav-stacked">
<li><a href="#graphical-view">Graphical view</a></li>
      <li><a href="#data-options">Data options</a></li>
      <li><a href="#pivot-table-values">Pivot table values</a></li>
      <li><a href="#data-modes">Data modes</a></li>
      <li><a href="#other-options">Other options</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ryan Timpe.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
